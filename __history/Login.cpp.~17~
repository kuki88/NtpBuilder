//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Login.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TFormLogin *FormLogin;
//---------------------------------------------------------------------------
__fastcall TFormLogin::TFormLogin(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TFormLogin::btnLoginClick(TObject *Sender)
{
	UnicodeString query = "select * from admin where korisnickoIme = '" + editKorisnicko->Text +
					 "' AND lozinka = '" + editLozinka->Text + "'";
	AnsiString ansiQuery = query;

	ADOQuery1->ConnectionString = ADOTable1->ConnectionString;
	ADOQuery1->SQL->Add(ansiQuery);

	ADOQuery1->Prepared = true;

	try
	{
		ADOQuery1->Active = true;
	}
	catch (EADOError& e)
	{
		MessageDlg("Error while connecting", mtError,
					  TMsgDlgButtons() << mbOK, 0);
		return;
	}

	TDataSource* Src = new TDataSource(this);
	Src->DataSet = ADOQuery1;
	Src->Enabled = true;


	TDataSet* DataSet;
	DataSet->DataSource = Src->;
}
//---------------------------------------------------------------------------

